{"version":3,"file":"DefaultLayerHeader.js","sourceRoot":"","sources":["../../../src/layers/DefaultLayer/DefaultLayerHeader.tsx"],"names":[],"mappings":"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","sourcesContent":["import { useEditor } from '@craftjs/core';\nimport React from 'react';\nimport { styled } from 'styled-components';\n\nimport { EditableLayerName } from './EditableLayerName';\nimport Arrow from './svg/arrow.svg';\nimport Eye from './svg/eye.svg';\nimport Linked from './svg/linked.svg';\n\nimport { LayersTheme } from '../../theme';\nimport { useLayerTheme } from '../ThemeContext';\nimport { useLayer } from '../useLayer';\n\nconst StyledDiv = styled.div<{\n  $depth: number;\n  $selected: boolean;\n  $theme: LayersTheme;\n}>`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 4px 10px;\n  background: ${(props) =>\n    props.$selected ? props.$theme.bgSelected : 'transparent'};\n  color: ${(props) =>\n    props.$selected ? props.$theme.textSelected : props.$theme.textPrimary};\n  svg {\n    fill: ${(props) =>\n      props.$selected ? props.$theme.iconSelected : props.$theme.iconPrimary};\n    margin-top: 2px;\n  }\n  .inner {\n    flex: 1;\n    > div {\n      padding: 0px;\n      flex: 1;\n      display: flex;\n      margin-left: ${(props) => props.$depth * 10}px;\n      align-items: center;\n      div.layer-name {\n        flex: 1;\n        h2 {\n          font-size: 15px;\n          line-height: 26px;\n        }\n      }\n    }\n  }\n`;\n\nconst Expand = styled.a<{ $expanded: boolean }>`\n  width: 8px;\n  height: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transform-origin: center;\n  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n  transform: rotate(${(props) => (props.$expanded ? 180 : 0)}deg);\n  opacity: 0.7;\n  cursor: pointer;\n`;\n\nconst Hide = styled.a<{\n  $selected: boolean;\n  $isHidden: boolean;\n  $theme: LayersTheme;\n}>`\n  width: 14px;\n  height: 14px;\n  margin-right: 10px;\n  position: relative;\n  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n  cursor: pointer;\n\n  svg {\n    width: 100%;\n    height: 100%;\n    object-fit: contain;\n    opacity: ${(props) => (props.$isHidden ? 0.2 : 1)};\n  }\n  &:after {\n    content: ' ';\n    width: 2px;\n    height: ${(props) => (props.$isHidden ? 100 : 0)}%;\n    position: absolute;\n    left: 2px;\n    top: 3px;\n    background: ${(props) =>\n      props.$selected ? props.$theme.iconSelected : props.$theme.iconPrimary};\n    transform: rotate(-45deg);\n    transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n    transform-origin: 0% 0%;\n    opacity: ${(props) => (props.$isHidden ? 0.4 : 1)};\n  }\n`;\n\nconst TopLevelIndicator = styled.div`\n  margin-left: -22px;\n  margin-right: 10px;\n\n  svg {\n    width: 12px;\n    height: 12px;\n  }\n`;\n\nexport const DefaultLayerHeader = () => {\n  const theme = useLayerTheme();\n  const {\n    id,\n    depth,\n    expanded,\n    children,\n    connectors: { drag, layerHeader },\n    actions: { toggleLayer },\n  } = useLayer((layer) => {\n    return {\n      expanded: layer.expanded,\n    };\n  });\n\n  const { hidden, actions, selected, topLevel } = useEditor((state, query) => {\n    // TODO: handle multiple selected elements\n    const selected = query.getEvent('selected').first() === id;\n\n    return {\n      hidden: state.nodes[id] && state.nodes[id].data.hidden,\n      selected,\n      topLevel: query.node(id).isTopLevelCanvas(),\n    };\n  });\n\n  return (\n    <StyledDiv\n      $selected={selected}\n      ref={(dom) => {\n        drag(dom);\n      }}\n      $depth={depth}\n      $theme={theme}\n    >\n      <Hide\n        $selected={selected}\n        $isHidden={hidden}\n        $theme={theme}\n        onClick={() => actions.setHidden(id, !hidden)}\n      >\n        <Eye />\n      </Hide>\n      <div className=\"inner\">\n        <div\n          ref={(dom) => {\n            layerHeader(dom);\n          }}\n        >\n          {topLevel ? (\n            <TopLevelIndicator>\n              <Linked />\n            </TopLevelIndicator>\n          ) : null}\n\n          <div className=\"layer-name s\">\n            <EditableLayerName />\n          </div>\n          <div>\n            {children && children.length ? (\n              <Expand $expanded={expanded} onMouseDown={() => toggleLayer()}>\n                <Arrow />\n              </Expand>\n            ) : null}\n          </div>\n        </div>\n      </div>\n    </StyledDiv>\n  );\n};\n"]}