{"version":3,"file":"index.js","sources":["../../src/layers/LayerContext.tsx","../../src/manager/context.tsx","../../src/manager/useLayerManager.tsx","../../src/layers/useLayer.tsx","../../src/layers/LayerNode.tsx","../../src/events/LayerEventContext.tsx","../../src/layers/LayerContextProvider.tsx","../../src/manager/actions.tsx","../../src/events/LayerHandlers.ts","../../src/events/RenderLayerIndicator.tsx","../../src/events/LayerEventContextProvider.tsx","../../src/layers/DefaultLayer/EditableLayerName.tsx","../../src/layers/DefaultLayer/svg/arrow.svg","../../src/layers/DefaultLayer/svg/eye.svg","../../src/layers/DefaultLayer/svg/grip.svg","../../src/layers/DefaultLayer/svg/linked.svg","../../src/theme.ts","../../src/layers/ThemeContext.tsx","../../src/layers/DefaultLayer/DefaultLayerHeader.tsx","../../src/layers/DefaultLayer/DefaultLayer.tsx","../../src/manager/LayerManagerProvider.tsx","../../src/index.tsx"],"sourcesContent":["import { NodeId } from '@craftjs/core';\nimport { EventHandlerConnectors } from '@craftjs/utils';\nimport React from 'react';\n\nimport { LayerHandlers } from '../events/LayerHandlers';\n\nexport type LayerContextType = {\n  id: NodeId;\n  depth: number;\n  connectors: EventHandlerConnectors<LayerHandlers, React.ReactElement>;\n};\n\nexport const LayerContext = React.createContext<LayerContextType>(\n  {} as LayerContextType\n);\n","import { SubscriberAndCallbacksFor } from '@craftjs/utils';\nimport { createContext } from 'react';\n\nimport { LayerMethods } from './actions';\n\nexport type LayerStore = SubscriberAndCallbacksFor<typeof LayerMethods>;\nexport type LayerManagerContextType = {\n  store: LayerStore;\n};\n\nexport const LayerManagerContext = createContext<LayerManagerContextType>(\n  {} as LayerManagerContextType\n);\n","import { useCollector } from '@craftjs/utils';\nimport { useContext, useMemo } from 'react';\n\nimport { LayerManagerContext } from './context';\n\nimport { LayerState } from '../interfaces';\n\nexport function useLayerManager<C>(collector?: (state: LayerState) => C) {\n  const { store } = useContext(LayerManagerContext);\n  const collected = useCollector(store, collector);\n\n  return useMemo(\n    () => ({\n      store,\n      ...collected,\n    }),\n    [store, collected]\n  );\n}\n","import { useEditor } from '@craftjs/core';\nimport { wrapConnectorHooks } from '@craftjs/utils';\nimport { useContext, useMemo } from 'react';\n\nimport { LayerContext } from './LayerContext';\n\nimport { Layer } from '../interfaces';\nimport { useLayerManager } from '../manager';\n\nexport function useLayer<S = null>(collect?: (layer: Layer) => S) {\n  const { id, depth, connectors: internalConnectors } = useContext(\n    LayerContext\n  );\n\n  const { actions: managerActions, ...collected } = useLayerManager((state) => {\n    return id && state.layers[id] && collect && collect(state.layers[id]);\n  });\n\n  const { children } = useEditor((state, query) => ({\n    children: state.nodes[id] && query.node(id).descendants(),\n  }));\n\n  const actions = useMemo(() => {\n    return {\n      toggleLayer: () => managerActions.toggleLayer(id),\n      setExpandedState: (expanded: boolean) =>\n        managerActions.setExpandedState(id, expanded),\n    };\n  }, [managerActions, id]);\n\n  const connectors = useMemo(\n    () =>\n      wrapConnectorHooks({\n        layer: (el: HTMLElement) => internalConnectors.layer(el, id),\n        drag: (el: HTMLElement) => internalConnectors.drag(el, id),\n        layerHeader: (el: HTMLElement) =>\n          internalConnectors.layerHeader(el, id),\n      }),\n    [internalConnectors, id]\n  );\n\n  return {\n    id,\n    depth,\n    children,\n    actions,\n    connectors,\n    ...collected,\n  };\n}\n","import { useEditor, ROOT_NODE } from '@craftjs/core';\nimport React, { useRef, useEffect, useLayoutEffect, useState } from 'react';\n\nimport { LayerContextProvider } from './LayerContextProvider';\nimport { useLayer } from './useLayer';\n\nimport { useLayerManager } from '../manager/useLayerManager';\n\nexport const LayerNode = () => {\n  const { id, depth, children, expanded } = useLayer((layer) => ({\n    expanded: layer.expanded,\n  }));\n\n  const { data, shouldBeExpanded } = useEditor((state, query) => {\n    // TODO: handle multiple selected elements\n    const selected = query.getEvent('selected').first();\n\n    return {\n      data: state.nodes[id] && state.nodes[id].data,\n      shouldBeExpanded:\n        selected && query.node(selected).ancestors(true).includes(id),\n    };\n  });\n\n  const {\n    actions: { registerLayer, toggleLayer },\n    renderLayer,\n    expandRootOnLoad,\n  } = useLayerManager((state) => ({\n    renderLayer: state.options.renderLayer,\n    expandRootOnLoad: state.options.expandRootOnLoad,\n  }));\n\n  const [isRegistered, setRegistered] = useState(false);\n\n  useLayoutEffect(() => {\n    registerLayer(id);\n    setRegistered(true);\n  }, [registerLayer, id]);\n\n  const expandedRef = useRef<boolean>(expanded);\n  expandedRef.current = expanded;\n\n  const shouldBeExpandedOnLoad = useRef<boolean>(\n    expandRootOnLoad && id === ROOT_NODE\n  );\n\n  useEffect(() => {\n    if (!expandedRef.current && shouldBeExpanded) {\n      toggleLayer(id);\n    }\n  }, [toggleLayer, id, shouldBeExpanded]);\n\n  useEffect(() => {\n    if (shouldBeExpandedOnLoad.current) {\n      toggleLayer(id);\n    }\n  }, [toggleLayer, id]);\n\n  return data && isRegistered ? (\n    <div className={`craft-layer-node ${id}`}>\n      {React.createElement(\n        renderLayer,\n        {},\n        children && expanded\n          ? children.map((id) => (\n              <LayerContextProvider key={id} id={id} depth={depth + 1} />\n            ))\n          : null\n      )}\n    </div>\n  ) : null;\n};\n","import { createContext, useContext } from 'react';\n\nimport { LayerHandlers } from './LayerHandlers';\n\nexport const LayerEventHandlerContext = createContext<LayerHandlers>(null);\n\nexport const useLayerEventHandler = () => useContext(LayerEventHandlerContext);\n","import { useEditor } from '@craftjs/core';\nimport { wrapConnectorHooks } from '@craftjs/utils';\nimport React, { useMemo, useContext, useRef, useEffect } from 'react';\n\nimport { LayerContext, LayerContextType } from './LayerContext';\nimport { LayerNode } from './LayerNode';\n\nimport { useLayerEventHandler } from '../events/LayerEventContext';\nimport { LayerManagerContext } from '../manager';\n\nexport type LayerContextProviderProps = Omit<LayerContextType, 'connectors'>;\n\nexport const LayerContextProvider = ({\n  id,\n  depth,\n}: LayerContextProviderProps) => {\n  const handlers = useLayerEventHandler();\n\n  const { store } = useContext(LayerManagerContext);\n  const storeRef = useRef(store);\n  storeRef.current = store;\n\n  const connectorsUsage = useMemo(() => handlers.createConnectorsUsage(), [\n    handlers,\n  ]);\n\n  const connectors = useMemo(\n    () => wrapConnectorHooks(connectorsUsage.connectors),\n    [connectorsUsage]\n  );\n\n  useEffect(() => {\n    connectorsUsage.register();\n\n    return () => {\n      connectorsUsage.cleanup();\n    };\n  }, [connectorsUsage]);\n\n  const { exists } = useEditor((state) => ({\n    exists: !!state.nodes[id],\n  }));\n\n  if (!exists) {\n    return null;\n  }\n\n  return (\n    <LayerContext.Provider value={{ id, depth, connectors }}>\n      <LayerNode />\n    </LayerContext.Provider>\n  );\n};\n","import { LayerState, LayerEvents } from '../interfaces';\n\nexport const LayerMethods = (state: LayerState) => ({\n  setLayerEvent: (eventType: LayerEvents, id: string) => {\n    if (id !== null && !state.layers[id]) return;\n\n    const current = state.events[eventType];\n    if (current && id !== current) {\n      state.layers[current].event[eventType] = false;\n    }\n\n    if (id) {\n      state.layers[id].event[eventType] = true;\n      state.events[eventType] = id;\n    } else {\n      state.events[eventType] = null;\n    }\n  },\n  registerLayer: (id: string) => {\n    if (!state.layers[id]) {\n      state.layers[id] = {\n        dom: null,\n        headingDom: null,\n        expanded: false,\n        id,\n        event: {\n          selected: false,\n          hovered: false,\n        },\n      };\n    }\n  },\n  setDOM: (\n    id: string,\n    domCollection: Partial<Record<'dom' | 'headingDom', HTMLElement>>\n  ) => {\n    state.layers[id] = {\n      ...state.layers[id],\n      ...(domCollection.dom ? { dom: domCollection.dom } : {}),\n      ...(domCollection.headingDom\n        ? { headingDom: domCollection.headingDom }\n        : {}),\n    };\n  },\n  toggleLayer: (id: string) => {\n    state.layers[id].expanded = !state.layers[id].expanded;\n  },\n  setExpandedState: (id: string, expanded: boolean) => {\n    state.layers[id].expanded = expanded;\n  },\n  setIndicator: (indicator) => {\n    state.events.indicator = indicator;\n  },\n});\n","import { NodeId, Node, DerivedCoreEventHandlers } from '@craftjs/core';\n\nimport { LayerIndicator } from '../interfaces';\n\nexport class LayerHandlers extends DerivedCoreEventHandlers<{\n  layerStore: any;\n}> {\n  static draggedElement;\n  static events: {\n    indicator: LayerIndicator;\n    currentCanvasHovered: Node;\n  } = {\n    indicator: null,\n    currentCanvasHovered: null,\n  };\n\n  private autoScrollInterval: number | null = null;\n  private readonly AUTO_SCROLL_THRESHOLD = 50; // pixels from edge\n  private readonly AUTO_SCROLL_SPEED = 5; // pixels per frame\n\n  getLayer(id: NodeId) {\n    return this.options.layerStore.getState().layers[id];\n  }\n\n  private handleAutoScroll(e: DragEvent, scrollContainer: HTMLElement | null) {\n    if (!scrollContainer) return;\n\n    const rect = scrollContainer.getBoundingClientRect();\n    const distanceFromTop = e.clientY - rect.top;\n    const distanceFromBottom = rect.bottom - e.clientY;\n\n    // Clear existing interval\n    if (this.autoScrollInterval) {\n      cancelAnimationFrame(this.autoScrollInterval);\n      this.autoScrollInterval = null;\n    }\n\n    // Check if near top or bottom\n    if (\n      distanceFromTop < this.AUTO_SCROLL_THRESHOLD &&\n      scrollContainer.scrollTop > 0\n    ) {\n      // Scroll up\n      const speed = Math.max(\n        1,\n        (this.AUTO_SCROLL_THRESHOLD - distanceFromTop) / 10\n      );\n      const scroll = () => {\n        scrollContainer.scrollTop -= speed;\n        if (scrollContainer.scrollTop > 0) {\n          this.autoScrollInterval = requestAnimationFrame(scroll);\n        }\n      };\n      this.autoScrollInterval = requestAnimationFrame(scroll);\n    } else if (distanceFromBottom < this.AUTO_SCROLL_THRESHOLD) {\n      // Scroll down\n      const maxScroll =\n        scrollContainer.scrollHeight - scrollContainer.clientHeight;\n      if (scrollContainer.scrollTop < maxScroll) {\n        const speed = Math.max(\n          1,\n          (this.AUTO_SCROLL_THRESHOLD - distanceFromBottom) / 10\n        );\n        const scroll = () => {\n          scrollContainer.scrollTop += speed;\n          const currentMaxScroll =\n            scrollContainer.scrollHeight - scrollContainer.clientHeight;\n          if (scrollContainer.scrollTop < currentMaxScroll) {\n            this.autoScrollInterval = requestAnimationFrame(scroll);\n          }\n        };\n        this.autoScrollInterval = requestAnimationFrame(scroll);\n      }\n    }\n  }\n\n  private stopAutoScroll() {\n    if (this.autoScrollInterval) {\n      cancelAnimationFrame(this.autoScrollInterval);\n      this.autoScrollInterval = null;\n    }\n  }\n\n  handlers() {\n    const editorStore = this.derived.options.store;\n    const { layerStore } = this.options;\n    return {\n      layer: (el: HTMLElement, layerId: NodeId) => {\n        layerStore.actions.setDOM(layerId, {\n          dom: el,\n        });\n\n        const cleanupParentConnectors = this.inherit((connectors) => {\n          connectors.select(el, layerId);\n          connectors.hover(el, layerId);\n          connectors.drag(el, layerId);\n        });\n\n        const unbindMouseOver = this.addCraftEventListener(\n          el,\n          'mouseover',\n          (e) => {\n            e.craft.stopPropagation();\n            layerStore.actions.setLayerEvent('hovered', layerId);\n          }\n        );\n\n        let unbindMouseleave: (() => void) | null = null;\n\n        if (this.derived.options.removeHoverOnMouseleave) {\n          unbindMouseleave = this.addCraftEventListener(\n            el,\n            'mouseleave',\n            (e) => {\n              e.craft.stopPropagation();\n              layerStore.actions.setLayerEvent('hovered', null);\n            }\n          );\n        }\n\n        const unbindDragOver = this.addCraftEventListener(\n          el,\n          'dragover',\n          (e) => {\n            e.craft.stopPropagation();\n            e.preventDefault();\n\n            // Auto-scroll handling\n            const scrollContainer = el.closest(\n              '.craft-layers-container'\n            ) as HTMLElement;\n            this.handleAutoScroll(e, scrollContainer);\n\n            const { indicator, currentCanvasHovered } = LayerHandlers.events;\n\n            if (currentCanvasHovered && indicator) {\n              const heading = this.getLayer(\n                currentCanvasHovered.id\n              ).headingDom.getBoundingClientRect();\n\n              if (\n                e.clientY > heading.top + 20 &&\n                e.clientY < heading.bottom - 20\n              ) {\n                const currNode =\n                  currentCanvasHovered.data.nodes[\n                    currentCanvasHovered.data.nodes.length - 1\n                  ];\n\n                if (!currNode) {\n                  // If the currentCanvasHovered has no child nodes, then we place the indicator as the first child\n                  LayerHandlers.events.indicator = {\n                    ...indicator,\n                    placement: {\n                      ...indicator.placement,\n                      index: 0,\n                      where: 'before',\n                      parent: currentCanvasHovered,\n                    },\n                    onCanvas: true,\n                  };\n                  return;\n                }\n\n                LayerHandlers.events.indicator = {\n                  ...indicator,\n                  placement: {\n                    currentNode: editorStore.query.node(currNode).get(),\n                    index: currentCanvasHovered.data.nodes.length,\n                    where: 'after',\n                    parent: currentCanvasHovered,\n                  },\n                  onCanvas: true,\n                };\n\n                layerStore.actions.setIndicator(LayerHandlers.events.indicator);\n              }\n            }\n          }\n        );\n\n        const unbindDragEnter = this.addCraftEventListener(\n          el,\n          'dragenter',\n          (e) => {\n            e.craft.stopPropagation();\n            e.preventDefault();\n\n            const dragId = LayerHandlers.draggedElement;\n\n            if (!dragId) return;\n\n            let target = layerId;\n\n            const indicatorInfo = editorStore.query.getDropPlaceholder(\n              dragId,\n              target,\n              { x: e.clientX, y: e.clientY },\n              (node) => {\n                const layer = this.getLayer(node.id);\n                return layer && layer.dom;\n              }\n            );\n\n            if (indicatorInfo) {\n              const {\n                placement: { parent },\n              } = indicatorInfo;\n              const parentHeadingInfo = this.getLayer(\n                parent.id\n              ).headingDom.getBoundingClientRect();\n\n              LayerHandlers.events.currentCanvasHovered = null;\n              if (editorStore.query.node(parent.id).isCanvas()) {\n                if (parent.data.parent) {\n                  const grandparent = editorStore.query\n                    .node(parent.data.parent)\n                    .get();\n                  if (editorStore.query.node(grandparent.id).isCanvas()) {\n                    LayerHandlers.events.currentCanvasHovered = parent;\n                    if (\n                      (e.clientY > parentHeadingInfo.bottom - 20 &&\n                        !this.getLayer(parent.id).expanded) ||\n                      e.clientY < parentHeadingInfo.top + 20\n                    ) {\n                      indicatorInfo.placement.parent = grandparent;\n                      indicatorInfo.placement.currentNode = parent;\n                      indicatorInfo.placement.index = grandparent.data.nodes\n                        ? grandparent.data.nodes.indexOf(parent.id)\n                        : 0;\n                      if (\n                        e.clientY > parentHeadingInfo.bottom - 20 &&\n                        !this.getLayer(parent.id).expanded\n                      ) {\n                        indicatorInfo.placement.where = 'after';\n                      } else if (e.clientY < parentHeadingInfo.top + 20) {\n                        indicatorInfo.placement.where = 'before';\n                      }\n                    }\n                  }\n                }\n              }\n\n              LayerHandlers.events.indicator = {\n                ...indicatorInfo,\n                onCanvas: false,\n              };\n\n              layerStore.actions.setIndicator(LayerHandlers.events.indicator);\n            }\n          }\n        );\n\n        return () => {\n          cleanupParentConnectors();\n          unbindMouseOver();\n          unbindDragOver();\n          unbindDragEnter();\n\n          if (!unbindMouseleave) {\n            return;\n          }\n\n          unbindMouseleave();\n        };\n      },\n      layerHeader: (el: HTMLElement, layerId: NodeId) => {\n        layerStore.actions.setDOM(layerId, {\n          headingDom: el,\n        });\n      },\n      drag: (el: HTMLElement, layerId: NodeId) => {\n        el.setAttribute('draggable', 'true');\n\n        const unbindDragStart = this.addCraftEventListener(\n          el,\n          'dragstart',\n          (e) => {\n            e.craft.stopPropagation();\n            LayerHandlers.draggedElement = layerId;\n          }\n        );\n\n        const unbindDragEnd = this.addCraftEventListener(el, 'dragend', (e) => {\n          e.craft.stopPropagation();\n          this.stopAutoScroll(); // Stop auto-scroll on drag end\n          const events = LayerHandlers.events;\n\n          if (events.indicator && !events.indicator.error) {\n            const { placement } = events.indicator;\n            const { parent, index, where } = placement;\n            const { id: parentId } = parent;\n\n            editorStore.actions.move(\n              LayerHandlers.draggedElement as NodeId,\n              parentId,\n              index + (where === 'after' ? 1 : 0)\n            );\n          }\n\n          LayerHandlers.draggedElement = null;\n          LayerHandlers.events.indicator = null;\n          layerStore.actions.setIndicator(null);\n        });\n\n        return () => {\n          el.removeAttribute('draggable');\n          unbindDragStart();\n          unbindDragEnd();\n        };\n      },\n    };\n  }\n}\n","import { useEditor } from '@craftjs/core';\nimport React, { useMemo } from 'react';\nimport { styled, keyframes } from 'styled-components';\n\nimport { useLayerManager } from '../manager/useLayerManager';\n\nconst pulse = keyframes`\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.7;\n  }\n`;\n\nconst StyledIndicator = styled.div<{ $error?: boolean }>`\n  position: fixed;\n  pointer-events: none;\n  z-index: 99999;\n  box-shadow: ${(props) =>\n    props.$error\n      ? '0 0 8px rgba(239, 68, 68, 0.6)'\n      : '0 0 8px rgba(59, 130, 246, 0.6)'};\n  animation: ${pulse} 1.5s ease-in-out infinite;\n`;\n\ntype RenderLayerIndicatorProps = {\n  children?: React.ReactNode;\n};\n\nexport const RenderLayerIndicator = ({\n  children,\n}: RenderLayerIndicatorProps) => {\n  const { layers, events } = useLayerManager((state) => state);\n  const { query } = useEditor((state) => ({ enabled: state.options.enabled }));\n  const { indicator: indicatorStyles } = query.getOptions();\n\n  const indicatorPosition = useMemo(() => {\n    const { indicator } = events;\n\n    if (indicator) {\n      const {\n        placement: { where, parent, currentNode },\n        error,\n      } = indicator;\n      const layerId = currentNode ? currentNode.id : parent.id;\n\n      let top;\n      const color = error ? indicatorStyles.error : indicatorStyles.success;\n\n      if (indicator.onCanvas && layers[parent.id].dom != null) {\n        const parentPos = layers[parent.id].dom.getBoundingClientRect();\n        const parentHeadingPos = layers[\n          parent.id\n        ].headingDom.getBoundingClientRect();\n        return {\n          top: parentHeadingPos.top,\n          left: parentPos.left,\n          width: parentPos.width,\n          height: parentHeadingPos.height,\n          background: 'transparent',\n          borderWidth: '1px',\n          borderColor: color,\n        };\n      } else {\n        if (!layers[layerId]) return;\n        const headingPos = layers[layerId].headingDom.getBoundingClientRect();\n        const pos = layers[layerId].dom.getBoundingClientRect();\n\n        if (where === 'after' || !currentNode) {\n          top = pos.top + pos.height;\n        } else {\n          top = pos.top;\n        }\n\n        return {\n          top,\n          left: headingPos.left,\n          width: pos.width + pos.left - headingPos.left,\n          height: 4,\n          borderWidth: 0,\n          background: color,\n        };\n      }\n    }\n  }, [events, indicatorStyles.error, indicatorStyles.success, layers]);\n\n  return (\n    <div>\n      {events.indicator ? (\n        <StyledIndicator\n          $error={!!events.indicator.error}\n          style={indicatorPosition}\n        />\n      ) : null}\n      {children}\n    </div>\n  );\n};\n","import { useEventHandler } from '@craftjs/core';\nimport React, { useMemo } from 'react';\n\nimport { LayerEventHandlerContext } from './LayerEventContext';\nimport { LayerHandlers } from './LayerHandlers';\nimport { RenderLayerIndicator } from './RenderLayerIndicator';\n\nimport { useLayerManager } from '../manager';\n\nexport const LayerEventContextProvider = ({ children }) => {\n  const { store: layerStore } = useLayerManager();\n  const coreEventHandler = useEventHandler();\n\n  const handler = useMemo(\n    () =>\n      coreEventHandler.derive(LayerHandlers, {\n        layerStore,\n      }),\n    [coreEventHandler, layerStore]\n  );\n\n  return (\n    <LayerEventHandlerContext.Provider value={handler}>\n      <RenderLayerIndicator />\n      {children}\n    </LayerEventHandlerContext.Provider>\n  );\n};\n","import { useEditor } from '@craftjs/core';\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport ContentEditable from 'react-contenteditable';\n\nimport { useLayer } from '../useLayer';\n\nexport const EditableLayerName = () => {\n  const { id } = useLayer();\n\n  const { displayName, actions } = useEditor((state) => ({\n    displayName:\n      state.nodes[id] && state.nodes[id].data.custom.displayName\n        ? state.nodes[id].data.custom.displayName\n        : state.nodes[id].data.displayName,\n    hidden: state.nodes[id] && state.nodes[id].data.hidden,\n  }));\n\n  const [editingName, setEditingName] = useState(false);\n  const nameDOM = useRef<HTMLElement | null>(null);\n\n  const clickOutside = useCallback((e) => {\n    if (nameDOM.current && !nameDOM.current.contains(e.target)) {\n      setEditingName(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    return () => {\n      window.removeEventListener('click', clickOutside);\n    };\n  }, [clickOutside]);\n\n  return (\n    <ContentEditable\n      html={displayName}\n      disabled={!editingName}\n      ref={(ref: any) => {\n        if (ref) {\n          nameDOM.current = ref.el.current;\n          window.removeEventListener('click', clickOutside);\n          window.addEventListener('click', clickOutside);\n        }\n      }}\n      onChange={(e) => {\n        actions.setCustom(\n          id,\n          (custom) => (custom.displayName = e.target.value)\n        );\n      }}\n      tagName=\"h2\"\n      onDoubleClick={() => {\n        if (!editingName) setEditingName(true);\n      }}\n    />\n  );\n};\n","<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 10 6\">\n  <title>ChevronDownMedium</title>\n  <rect id=\"ToDelete\" fill=\"#ff13dc\" opacity=\"0\" /><path d=\"M9.99,1.01A.9999.9999,0,0,0,8.28266.30327L5,3.58594,1.71734.30327A.9999.9999,0,1,0,.30327,1.71734L4.29266,5.69673a.99965.99965,0,0,0,1.41468,0L9.69673,1.71734A.99669.99669,0,0,0,9.99,1.01Z\" />\n</svg>","<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"16\" height=\"16\"><path fill=\"none\" d=\"M0 0h24v24H0z\"/><path d=\"M1.181 12C2.121 6.88 6.608 3 12 3c5.392 0 9.878 3.88 10.819 9-.94 5.12-5.427 9-10.819 9-5.392 0-9.878-3.88-10.819-9zM12 17a5 5 0 1 0 0-10 5 5 0 0 0 0 10zm0-2a3 3 0 1 1 0-6 3 3 0 0 1 0 6z\"/></svg>","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n  <circle cx=\"6\" cy=\"4\" r=\"1.5\"/>\n  <circle cx=\"10\" cy=\"4\" r=\"1.5\"/>\n  <circle cx=\"6\" cy=\"8\" r=\"1.5\"/>\n  <circle cx=\"10\" cy=\"8\" r=\"1.5\"/>\n  <circle cx=\"6\" cy=\"12\" r=\"1.5\"/>\n  <circle cx=\"10\" cy=\"12\" r=\"1.5\"/>\n</svg>\n","<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\">\n  <defs>\n    <!-- <style>\n      .a {\n        fill: #707070;\n      }\n    </style> -->\n  </defs>\n  <title>S LinkOut 18 N</title>\n  <rect id=\"Canvas\" opacity=\"0\" /><path class=\"a\" d=\"M16.5,9h-1a.5.5,0,0,0-.5.5V15H3V3H8.5A.5.5,0,0,0,9,2.5v-1A.5.5,0,0,0,8.5,1h-7a.5.5,0,0,0-.5.5v15a.5.5,0,0,0,.5.5h15a.5.5,0,0,0,.5-.5v-7A.5.5,0,0,0,16.5,9Z\" />\n  <path class=\"a\" d=\"M16.75,1H11.377A.4.4,0,0,0,11,1.4a.392.392,0,0,0,.1175.28l1.893,1.895L9.4895,7.096a.5.5,0,0,0-.00039.70711l.00039.00039.707.707a.5.5,0,0,0,.707,0l3.5215-3.521L16.318,6.882A.39051.39051,0,0,0,16.6,7a.4.4,0,0,0,.4-.377V1.25A.25.25,0,0,0,16.75,1Z\" />\n</svg>","// Theme configuration for Craft.js Layers\nexport interface LayersTheme {\n  // Background colors\n  bgBase: string;\n  bgHover: string;\n  bgSelected: string;\n  bgCanvas: string;\n\n  // Text colors\n  textPrimary: string;\n  textSelected: string;\n\n  // Icon colors\n  iconPrimary: string;\n  iconSelected: string;\n\n  // Border and shadow\n  borderColor: string;\n  shadowColor: string;\n}\n\n// Light theme (default)\nexport const lightTheme: LayersTheme = {\n  bgBase: 'transparent',\n  bgHover: '#f1f1f1',\n  bgSelected: '#2680eb',\n  bgCanvas: 'rgba(255, 255, 255, 0.02)',\n\n  textPrimary: 'inherit',\n  textSelected: '#fff',\n\n  iconPrimary: '#808184',\n  iconSelected: '#fff',\n\n  borderColor: '#00000012',\n  shadowColor: '#00000014',\n};\n\n// Dark theme\nexport const darkTheme: LayersTheme = {\n  bgBase: 'transparent',\n  bgHover: '#2a2a2a',\n  bgSelected: '#2680eb',\n  bgCanvas: 'rgba(255, 255, 255, 0.05)',\n\n  textPrimary: '#e0e0e0',\n  textSelected: '#fff',\n\n  iconPrimary: '#b0b0b0',\n  iconSelected: '#fff',\n\n  borderColor: '#ffffff12',\n  shadowColor: '#00000040',\n};\n\n// Theme helper function\nexport const getTheme = (mode?: 'light' | 'dark'): LayersTheme => {\n  return mode === 'dark' ? darkTheme : lightTheme;\n};\n","import React, { createContext, useContext, useMemo } from 'react';\n\nimport { LayersTheme, getTheme } from '../theme';\n\ninterface ThemeContextValue {\n  theme: LayersTheme;\n}\n\nconst ThemeContext = createContext<ThemeContextValue | null>(null);\n\nexport interface ThemeProviderProps {\n  theme?: LayersTheme;\n  themeMode?: 'light' | 'dark';\n  children: React.ReactNode;\n}\n\nexport const ThemeProvider = ({\n  theme,\n  themeMode,\n  children,\n}: ThemeProviderProps) => {\n  const value = useMemo<ThemeContextValue>(() => {\n    // Use custom theme if provided, otherwise use themeMode\n    const resolvedTheme = theme || getTheme(themeMode);\n    return { theme: resolvedTheme };\n  }, [theme, themeMode]);\n\n  return (\n    <ThemeContext.Provider value={value}>{children}</ThemeContext.Provider>\n  );\n};\n\nexport const useLayerTheme = (): LayersTheme => {\n  const context = useContext(ThemeContext);\n  if (!context) {\n    // Return default light theme if no provider\n    return getTheme('light');\n  }\n  return context.theme;\n};\n","import { useEditor } from '@craftjs/core';\nimport React from 'react';\nimport { styled } from 'styled-components';\n\nimport { EditableLayerName } from './EditableLayerName';\nimport Arrow from './svg/arrow.svg';\nimport Eye from './svg/eye.svg';\nimport Grip from './svg/grip.svg';\nimport Linked from './svg/linked.svg';\n\nimport { LayersTheme } from '../../theme';\nimport { useLayerTheme } from '../ThemeContext';\nimport { useLayer } from '../useLayer';\n\nconst StyledDiv = styled.div<{\n  $depth: number;\n  $selected: boolean;\n  $theme: LayersTheme;\n}>`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 4px 10px;\n  background: ${(props) =>\n    props.$selected ? props.$theme.bgSelected : 'transparent'};\n  color: ${(props) =>\n    props.$selected ? props.$theme.textSelected : props.$theme.textPrimary};\n  svg {\n    fill: ${(props) =>\n      props.$selected ? props.$theme.iconSelected : props.$theme.iconPrimary};\n    margin-top: 2px;\n  }\n  .inner {\n    flex: 1;\n    > div {\n      padding: 0px;\n      flex: 1;\n      display: flex;\n      margin-left: ${(props) => Math.min(props.$depth * 8, 40)}px;\n      align-items: center;\n      div.layer-name {\n        flex: 1;\n        h2 {\n          font-size: 15px;\n          line-height: 26px;\n        }\n      }\n    }\n  }\n`;\n\nconst Expand = styled.a<{ $expanded: boolean }>`\n  width: 8px;\n  height: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transform-origin: center;\n  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n  transform: rotate(${(props) => (props.$expanded ? 180 : 0)}deg);\n  opacity: 0.7;\n  cursor: pointer;\n`;\n\nconst Hide = styled.a<{\n  $selected: boolean;\n  $isHidden: boolean;\n  $theme: LayersTheme;\n}>`\n  width: 14px;\n  height: 14px;\n  margin-right: 10px;\n  position: relative;\n  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n  cursor: pointer;\n\n  svg {\n    width: 100%;\n    height: 100%;\n    object-fit: contain;\n    opacity: ${(props) => (props.$isHidden ? 0.2 : 1)};\n  }\n  &:after {\n    content: ' ';\n    width: 2px;\n    height: ${(props) => (props.$isHidden ? 100 : 0)}%;\n    position: absolute;\n    left: 2px;\n    top: 3px;\n    background: ${(props) =>\n      props.$selected ? props.$theme.iconSelected : props.$theme.iconPrimary};\n    transform: rotate(-45deg);\n    transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n    transform-origin: 0% 0%;\n    opacity: ${(props) => (props.$isHidden ? 0.4 : 1)};\n  }\n`;\n\nconst TopLevelIndicator = styled.div`\n  margin-left: -22px;\n  margin-right: 10px;\n\n  svg {\n    width: 12px;\n    height: 12px;\n  }\n`;\n\nconst DragHandle = styled.div<{\n  $theme: LayersTheme;\n}>`\n  width: 20px;\n  height: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: grab;\n  opacity: 0.4;\n  transition: opacity 0.2s ease;\n  margin-right: 4px;\n  flex-shrink: 0;\n\n  &:hover {\n    opacity: 0.8;\n  }\n\n  &:active {\n    cursor: grabbing;\n    opacity: 1;\n  }\n\n  svg {\n    width: 14px;\n    height: 14px;\n    pointer-events: none;\n  }\n`;\n\nconst ReorderButtons = styled.div<{\n  $theme: LayersTheme;\n}>`\n  display: flex;\n  gap: 2px;\n  margin-left: auto;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n`;\n\nconst ReorderButton = styled.button<{\n  $theme: LayersTheme;\n  $disabled?: boolean;\n}>`\n  width: 18px;\n  height: 18px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: transparent;\n  border: none;\n  cursor: ${(props) => (props.$disabled ? 'not-allowed' : 'pointer')};\n  opacity: ${(props) => (props.$disabled ? 0.3 : 0.6)};\n  transition: opacity 0.2s ease;\n  padding: 0;\n  border-radius: 3px;\n\n  &:hover {\n    opacity: ${(props) => (props.$disabled ? 0.3 : 1)};\n    background: ${(props) =>\n      props.$disabled ? 'transparent' : props.$theme.bgHover};\n  }\n\n  svg {\n    width: 12px;\n    height: 12px;\n    pointer-events: none;\n  }\n`;\n\nexport const DefaultLayerHeader = () => {\n  const theme = useLayerTheme();\n  const {\n    id,\n    depth,\n    expanded,\n    children,\n    connectors: { drag, layerHeader },\n    actions: { toggleLayer },\n  } = useLayer((layer) => {\n    return {\n      expanded: layer.expanded,\n    };\n  });\n\n  const {\n    hidden,\n    actions,\n    selected,\n    topLevel,\n    parent,\n    currentIndex,\n    canMoveUp,\n    canMoveDown,\n  } = useEditor((state, query) => {\n    // TODO: handle multiple selected elements\n    const selected = query.getEvent('selected').first() === id;\n    const node = state.nodes[id];\n    const parent = node?.data?.parent ? state.nodes[node.data.parent] : null;\n    const siblings = parent?.data?.nodes || [];\n    const currentIndex = siblings.indexOf(id);\n\n    return {\n      hidden: node && node.data.hidden,\n      selected,\n      topLevel: query.node(id).isTopLevelCanvas(),\n      parent,\n      currentIndex,\n      canMoveUp: currentIndex > 0,\n      canMoveDown: currentIndex < siblings.length - 1 && currentIndex !== -1,\n    };\n  });\n\n  const handleMoveUp = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    if (!canMoveUp || !parent) return;\n    // Move to previous position\n    actions.move(id, parent.id, currentIndex - 1);\n  };\n\n  const handleMoveDown = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    if (!canMoveDown || !parent) return;\n    // When moving down, the node is removed first, so we need to add 2\n    // to account for: current position removal + skip the next sibling\n    actions.move(id, parent.id, currentIndex + 2);\n  };\n\n  const [isHovered, setIsHovered] = React.useState(false);\n\n  return (\n    <StyledDiv\n      $selected={selected}\n      $depth={depth}\n      $theme={theme}\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n    >\n      <DragHandle\n        ref={(dom) => {\n          drag(dom);\n        }}\n        $theme={theme}\n      >\n        <Grip />\n      </DragHandle>\n      <Hide\n        $selected={selected}\n        $isHidden={hidden}\n        $theme={theme}\n        onClick={() => actions.setHidden(id, !hidden)}\n      >\n        <Eye />\n      </Hide>\n      <div className=\"inner\">\n        <div\n          ref={(dom) => {\n            layerHeader(dom);\n          }}\n        >\n          {topLevel ? (\n            <TopLevelIndicator>\n              <Linked />\n            </TopLevelIndicator>\n          ) : null}\n\n          <div className=\"layer-name s\">\n            <EditableLayerName />\n          </div>\n          <div style={{ display: 'flex', alignItems: 'center', gap: '4px' }}>\n            {!topLevel && isHovered && (\n              <ReorderButtons\n                $theme={theme}\n                style={{ opacity: isHovered ? 1 : 0 }}\n              >\n                <ReorderButton\n                  $theme={theme}\n                  $disabled={!canMoveUp}\n                  onClick={handleMoveUp}\n                  title=\"Move up\"\n                >\n                  <svg viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                    <path d=\"M8 3l-5 5h10z\" />\n                  </svg>\n                </ReorderButton>\n                <ReorderButton\n                  $theme={theme}\n                  $disabled={!canMoveDown}\n                  onClick={handleMoveDown}\n                  title=\"Move down\"\n                >\n                  <svg viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                    <path d=\"M8 13l5-5H3z\" />\n                  </svg>\n                </ReorderButton>\n              </ReorderButtons>\n            )}\n            {children && children.length ? (\n              <Expand $expanded={expanded} onMouseDown={() => toggleLayer()}>\n                <Arrow />\n              </Expand>\n            ) : null}\n          </div>\n        </div>\n      </div>\n    </StyledDiv>\n  );\n};\n","import { useEditor } from '@craftjs/core';\nimport React from 'react';\nimport { styled } from 'styled-components';\n\nimport { DefaultLayerHeader } from './DefaultLayerHeader';\n\nimport { LayersTheme } from '../../theme';\nimport { useLayerTheme } from '../ThemeContext';\nimport { useLayer } from '../useLayer';\n\nconst LayerNodeDiv = styled.div<{\n  $expanded: boolean;\n  $hasCanvases: boolean;\n  $hovered: boolean;\n  $theme: LayersTheme;\n}>`\n  background: ${(props) =>\n    props.$hovered ? props.$theme.bgHover : props.$theme.bgBase};\n  display: block;\n  padding-bottom: ${(props) =>\n    props.$hasCanvases && props.$expanded ? 5 : 0}px;\n`;\n\nconst LayerChildren = styled.div<{\n  $hasCanvases: boolean;\n  $theme: LayersTheme;\n}>`\n  margin: 0 0 0 ${(props) => (props.$hasCanvases ? 28 : 0)}px;\n  background: ${(props) =>\n    props.$hasCanvases ? props.$theme.bgCanvas : 'transparent'};\n  position: relative;\n\n  ${(props) =>\n    props.$hasCanvases\n      ? `\n\n  box-shadow: 0px 0px 44px -1px ${props.$theme.shadowColor};\n  border-radius: 10px;\n  margin-right: 5px;\n  margin-bottom:5px;\n  margin-top:5px;\n  > * { overflow:hidden; }\n    &:before {\n      position:absolute;\n      left:-19px;\n      width: 2px;\n      height:100%;\n      content: \" \";\n      background:${props.$theme.borderColor};\n    }\n  `\n      : ''}\n`;\n\nexport type DefaultLayerProps = {\n  children?: React.ReactNode;\n};\n\nexport const DefaultLayer = ({ children }: DefaultLayerProps) => {\n  const theme = useLayerTheme();\n  const {\n    id,\n    expanded,\n    hovered,\n    connectors: { layer },\n  } = useLayer((layer) => ({\n    hovered: layer.event.hovered,\n    expanded: layer.expanded,\n  }));\n  const { hasChildCanvases } = useEditor((state, query) => {\n    return {\n      hasChildCanvases: query.node(id).isParentOfTopLevelNodes(),\n    };\n  });\n\n  return (\n    <LayerNodeDiv\n      ref={(dom) => {\n        layer(dom);\n      }}\n      $expanded={expanded}\n      $hasCanvases={hasChildCanvases}\n      $hovered={hovered}\n      $theme={theme}\n    >\n      <DefaultLayerHeader />\n      {children ? (\n        <LayerChildren\n          $hasCanvases={hasChildCanvases}\n          $theme={theme}\n          className=\"craft-layer-children\"\n        >\n          {children}\n        </LayerChildren>\n      ) : null}\n    </LayerNodeDiv>\n  );\n};\n","import { useMethods } from '@craftjs/utils';\nimport React from 'react';\n\nimport { LayerMethods } from './actions';\nimport { LayerManagerContext, LayerStore } from './context';\n\nimport { LayerEventContextProvider } from '../events';\nimport { LayerOptions } from '../interfaces';\nimport { DefaultLayer } from '../layers';\nimport { ThemeProvider } from '../layers/ThemeContext';\n\ntype LayerManagerProviderProps = {\n  options: Partial<LayerOptions>;\n  children?: React.ReactNode;\n};\n\nexport const LayerManagerProvider = ({\n  children,\n  options,\n}: LayerManagerProviderProps) => {\n  // TODO: fix type\n  const store = useMethods(LayerMethods, {\n    layers: {},\n    events: {\n      selected: null,\n      dragged: null,\n      hovered: null,\n    },\n    options: {\n      renderLayer: DefaultLayer,\n      ...options,\n    },\n  }) as LayerStore;\n\n  return (\n    <LayerManagerContext.Provider value={{ store }}>\n      <ThemeProvider theme={options.theme} themeMode={options.themeMode}>\n        <LayerEventContextProvider>{children}</LayerEventContextProvider>\n      </ThemeProvider>\n    </LayerManagerContext.Provider>\n  );\n};\n","import { ROOT_NODE } from '@craftjs/utils';\nimport React from 'react';\n\nimport { LayerOptions } from './interfaces';\nimport { LayerContextProvider } from './layers/LayerContextProvider';\nimport { LayerManagerProvider } from './manager/LayerManagerProvider';\n\nexport {\n  useLayer,\n  DefaultLayer,\n  DefaultLayerHeader,\n  EditableLayerName,\n} from './layers';\n\nexport type { LayersTheme } from './theme';\nexport { lightTheme, darkTheme, getTheme } from './theme';\n\ntype LayersProps = Partial<LayerOptions>;\n\nexport const Layers = ({ ...options }: LayersProps) => {\n  return (\n    <div\n      className=\"craft-layers-container\"\n      style={{ height: '100%', overflow: 'auto' }}\n    >\n      <LayerManagerProvider options={options}>\n        <LayerContextProvider id={ROOT_NODE} depth={0} />\n      </LayerManagerProvider>\n    </div>\n  );\n};\n"],"names":["LayerContext","React","createContext","LayerManagerContext","useLayerManager","collector","store","useContext","collected","useCollector","useMemo","useLayer","collect","id","depth","connectors","internalConnectors","actions","managerActions","state","layers","children","useEditor","query","nodes","node","descendants","toggleLayer","setExpandedState","expanded","wrapConnectorHooks","layer","el","drag","layerHeader","LayerNode","data","shouldBeExpanded","selected","getEvent","first","ancestors","includes","registerLayer","renderLayer","expandRootOnLoad","options","isRegistered","setRegistered","useState","useLayoutEffect","expandedRef","useRef","current","shouldBeExpandedOnLoad","ROOT_NODE","useEffect","createElement","className","map","LayerContextProvider","key","LayerEventHandlerContext","handlers","connectorsUsage","createConnectorsUsage","register","cleanup","exists","Provider","value","LayerMethods","setLayerEvent","eventType","events","event","dom","headingDom","hovered","setDOM","domCollection","setIndicator","indicator","LayerHandlers","DerivedCoreEventHandlers","constructor","super","arguments","_defineProperty","getLayer","this","layerStore","getState","handleAutoScroll","e","scrollContainer","rect","getBoundingClientRect","distanceFromTop","clientY","top","distanceFromBottom","bottom","autoScrollInterval","cancelAnimationFrame","AUTO_SCROLL_THRESHOLD","scrollTop","speed","Math","max","scroll","requestAnimationFrame","scrollHeight","clientHeight","stopAutoScroll","editorStore","derived","layerId","cleanupParentConnectors","inherit","select","hover","unbindMouseOver","addCraftEventListener","craft","stopPropagation","unbindMouseleave","removeHoverOnMouseleave","unbindDragOver","preventDefault","closest","currentCanvasHovered","heading","currNode","length","_objectSpread","placement","index","where","parent","onCanvas","currentNode","get","unbindDragEnter","dragId","draggedElement","indicatorInfo","getDropPlaceholder","x","clientX","y","parentHeadingInfo","isCanvas","grandparent","indexOf","setAttribute","unbindDragStart","unbindDragEnd","error","parentId","move","removeAttribute","pulse","keyframes","StyledIndicator","styled","div","props","$error","RenderLayerIndicator","enabled","indicatorStyles","getOptions","indicatorPosition","color","success","parentPos","parentHeadingPos","left","width","height","background","borderWidth","borderColor","headingPos","pos","style","LayerEventContextProvider","coreEventHandler","useEventHandler","handler","derive","EditableLayerName","displayName","custom","hidden","editingName","setEditingName","nameDOM","clickOutside","useCallback","contains","target","window","removeEventListener","ContentEditable","html","disabled","ref","addEventListener","onChange","setCustom","tagName","onDoubleClick","_path","_extends","Object","assign","bind","n","t","r","hasOwnProperty","call","apply","_path2","SvgArrow","xmlns","viewBox","d","_circle","_circle2","_circle3","_circle4","_circle5","_circle6","SvgEye","fill","SvgGrip","cx","cy","SvgLinked","lightTheme","bgBase","bgHover","bgSelected","bgCanvas","textPrimary","textSelected","iconPrimary","iconSelected","shadowColor","darkTheme","getTheme","mode","ThemeContext","ThemeProvider","theme","themeMode","useLayerTheme","context","StyledDiv","$selected","$theme","min","$depth","Expand","a","$expanded","Hide","$isHidden","TopLevelIndicator","DragHandle","ReorderButtons","ReorderButton","button","$disabled","DefaultLayerHeader","topLevel","currentIndex","canMoveUp","canMoveDown","siblings","isTopLevelCanvas","isHovered","setIsHovered","onMouseEnter","onMouseLeave","Grip","onClick","setHidden","Eye","Linked","display","alignItems","gap","opacity","title","onMouseDown","Arrow","LayerNodeDiv","$hovered","$hasCanvases","LayerChildren","DefaultLayer","hasChildCanvases","isParentOfTopLevelNodes","LayerManagerProvider","useMethods","dragged","overflow"],"mappings":"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"}