{"version":3,"file":"movePlaceholder.js","sourceRoot":"","sources":["../../src/events/movePlaceholder.ts"],"names":[],"mappings":"AAEA,MAAM,CAAC,OAAO,UAAU,eAAe,CACrC,GAAiB,EACjB,aAAsB,EAAE,4BAA4B;AACpD,iBAAiC,EAAE,sDAAsD;AACzF,YAAoB,CAAC;IAQrB,IAAI,CAAC,GAAG,CAAC,EACP,CAAC,GAAG,CAAC,EACL,CAAC,GAAG,CAAC,EACL,CAAC,GAAG,CAAC,EACL,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC;IAEpB,IAAI,IAAI,GAAqB,MAAM,CAAC;IACpC,MAAM,KAAK,GAAG,iBAAiB,CAAC;IAEhC,uEAAuE;IACvE,IAAI,CAAC,KAAK,EAAE,CAAC;QACX,IAAI,GAAG,OAAO,CAAC;QACf,IAAI,aAAa,EAAE,CAAC;YAClB,CAAC,GAAG,aAAa,CAAC,GAAG,GAAG,aAAa,CAAC,OAAO,CAAC,GAAG,CAAC;YAClD,CAAC,GAAG,aAAa,CAAC,IAAI,GAAG,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC;YACpD,CAAC;gBACC,aAAa,CAAC,UAAU;oBACxB,aAAa,CAAC,OAAO,CAAC,KAAK;oBAC3B,aAAa,CAAC,OAAO,CAAC,IAAI;oBAC1B,aAAa,CAAC,MAAM,CAAC,IAAI;oBACzB,aAAa,CAAC,MAAM,CAAC,KAAK,CAAC;YAC7B,CAAC;gBACC,aAAa,CAAC,WAAW;oBACzB,aAAa,CAAC,OAAO,CAAC,GAAG;oBACzB,aAAa,CAAC,OAAO,CAAC,MAAM;oBAC5B,aAAa,CAAC,MAAM,CAAC,GAAG;oBACxB,aAAa,CAAC,MAAM,CAAC,MAAM,CAAC;YAE9B,uCAAuC;YACvC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QACtB,CAAC;IACH,CAAC;SAAM,CAAC;QACN,kCAAkC;QAClC,IAAI,GAAG,MAAM,CAAC;QACd,6CAA6C;QAC7C,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;YAClB,CAAC,GAAG,SAAS,CAAC;YACd,CAAC,GAAG,KAAK,CAAC,WAAW,CAAC;YACtB,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC;YACd,CAAC,GAAG,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC,UAAU,CAAC;QACtE,CAAC;aAAM,CAAC;YACN,CAAC,GAAG,KAAK,CAAC,UAAU,CAAC;YACrB,CAAC,GAAG,SAAS,CAAC;YACd,CAAC,GAAG,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC;YAClD,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC;QACjB,CAAC;IACH,CAAC;IAED,OAAO;QACL,GAAG,EAAE,GAAG,CAAC,IAAI;QACb,IAAI,EAAE,GAAG,CAAC,IAAI;QACd,KAAK,EAAE,GAAG,CAAC,IAAI;QACf,MAAM,EAAE,GAAG,CAAC,IAAI;QAChB,IAAI;KACL,CAAC;AACJ,CAAC","sourcesContent":["import { DropPosition, DOMInfo } from '../interfaces';\n\nexport default function movePlaceholder(\n  pos: DropPosition,\n  canvasDOMInfo: DOMInfo, // which canvas is cursor at\n  bestTargetDomInfo: DOMInfo | null, // closest element in canvas (null if canvas is empty)\n  thickness: number = 2\n): {\n  top: string;\n  left: string;\n  width: string;\n  height: string;\n  mode: 'line' | 'block';\n} {\n  let t = 0,\n    l = 0,\n    w = 0,\n    h = 0,\n    where = pos.where;\n\n  let mode: 'line' | 'block' = 'line';\n  const elDim = bestTargetDomInfo;\n\n  // Show block area for empty containers or when dropping into container\n  if (!elDim) {\n    mode = 'block';\n    if (canvasDOMInfo) {\n      t = canvasDOMInfo.top + canvasDOMInfo.padding.top;\n      l = canvasDOMInfo.left + canvasDOMInfo.padding.left;\n      w =\n        canvasDOMInfo.outerWidth -\n        canvasDOMInfo.padding.right -\n        canvasDOMInfo.padding.left -\n        canvasDOMInfo.margin.left -\n        canvasDOMInfo.margin.right;\n      h =\n        canvasDOMInfo.outerHeight -\n        canvasDOMInfo.padding.top -\n        canvasDOMInfo.padding.bottom -\n        canvasDOMInfo.margin.top -\n        canvasDOMInfo.margin.bottom;\n\n      // Minimum height for better visibility\n      h = Math.max(h, 40);\n    }\n  } else {\n    // Line indicator for before/after\n    mode = 'line';\n    // If it's not in flow (like 'float' element)\n    if (!elDim.inFlow) {\n      w = thickness;\n      h = elDim.outerHeight;\n      t = elDim.top;\n      l = where === 'before' ? elDim.left : elDim.left + elDim.outerWidth;\n    } else {\n      w = elDim.outerWidth;\n      h = thickness;\n      t = where === 'before' ? elDim.top : elDim.bottom;\n      l = elDim.left;\n    }\n  }\n\n  return {\n    top: `${t}px`,\n    left: `${l}px`,\n    width: `${w}px`,\n    height: `${h}px`,\n    mode,\n  };\n}\n"]}